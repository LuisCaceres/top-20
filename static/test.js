const testCharts = new List(

//   // NOTE: INCLUDED SO DETECTOR AND CORRECTOR TESTS RUN SMOOTHLY
//   // WEEK -2
//   new Chart(
//     /* 20 */ 'Angels',
//     /* 19 */ '...Baby One More Time',
//     /* 18 */ 'Si Me Advertí',
//     /* 17 */ 'Let Forever Be',
//     /* 16 */ 'Look At Me',
//     /* 15 */ 'All Star',
//     /* 14 */ 'Atrapados En La Red',
//     /* 13 */ 'When You\'re Gone',
//     /* 12 */ 'Jennifer Del Estero',
//     /* 11 */ 'What\'s My Age Again?',
//     /* 10 */ 'Waiting For Tonight',
//     /* 09 */ 'Heartbreaker',
//     /* 08 */ 'The Kids Aren\'t Alright',
//     /* 07 */ 'If Ya Gettin\' Down',
//     /* 06 */ 'Higher',
//     /* 05 */ 'Someday We\'ll Know',
//     /* 04 */ 'La Lola',
//     /* 03 */ 'All I Have To Give',
//     /* 02 */ 'Someday',
//     /* 01 */ 'Puente',
//   ),
//   // NOTE: INCLUDED SO DETECTOR AND CORRECTOR TESTS RUN SMOOTHLY
//   // WEEK -1
//   new Chart(
//     /* 20 */ 'Angels',
//     /* 19 */ '...Baby One More Time',
//     /* 18 */ 'Si Me Advertí',
//     /* 17 */ 'Let Forever Be',
//     /* 16 */ 'Look At Me',
//     /* 15 */ 'All Star',
//     /* 14 */ 'Atrapados En La Red',
//     /* 13 */ 'When You\'re Gone',
//     /* 12 */ 'Jennifer Del Estero',
//     /* 11 */ 'What\'s My Age Again?',
//     /* 10 */ 'Waiting For Tonight',
//     /* 09 */ 'Heartbreaker',
//     /* 08 */ 'The Kids Aren\'t Alright',
//     /* 07 */ 'If Ya Gettin\' Down',
//     /* 06 */ 'Higher',
//     /* 05 */ 'Someday We\'ll Know',
//     /* 04 */ 'La Lola',
//     /* 03 */ 'All I Have To Give',
//     /* 02 */ 'Someday',
//     /* 01 */ 'Puente',
//   ),

  // WEEK 1
  new Chart(
    /* 20 */ 'Angels',
    /* 19 */ '...Baby One More Time',
    /* 18 */ 'Let Forever Be',
    /* 17 */ 'Si Me Advertí',
    /* 16 */ 'Look At Me',
    /* 15 */ 'Atrapados En La Red',
    /* 14 */ 'All Star',
    /* 13 */ 'When You\'re Gone',
    /* 12 */ 'Jennifer Del Estero',
    /* 11 */ 'What\'s My Age Again?',
    /* 10 */ 'Waiting For Tonight',
    /* 09 */ 'Heartbreaker',
    /* 08 */ 'The Kids Aren\'t Alright',
    /* 07 */ 'If Ya Gettin\' Down',
    /* 06 */ 'Higher',
    /* 05 */ 'Someday We\'ll Know',
    /* 04 */ 'La Lola',
    /* 03 */ 'All I Have To Give',
    /* 02 */ 'Someday',
    /* 01 */ 'Puente',
  ),

  // WEEK 2
  new Chart(
    /* 20 */ '...Baby One More Time',
    /* 19 */ 'No Quiero Verte',
    /* 18 */ 'Atrapados En La Red',
    /* 17 */ 'Waiting For Tonight',
    /* 16 */ 'What\'s My Age Again?',
    /* 15 */ 'Si Me Advertí',
    /* 14 */ 'Jennifer Del Estero',
    /* 13 */ 'When You\'re Gone',
    /* 12 */ 'Heartbreaker',
    /* 11 */ 'Angels',
    /* 10 */ 'I Need To Know',
    /* 09 */ 'All Star',
    /* 08 */ 'The Kids Aren\'t Alright',
    /* 07 */ 'If Ya Gettin\' Down',
    /* 06 */ 'La Lola',
    /* 05 */ 'Higher',
    /* 04 */ 'All I Have To Give',
    /* 03 */ 'Someday We\'ll Know',
    /* 02 */ 'Someday',
    /* 01 */ 'Puente',
  ),

  // WEEK 3
  new Chart(
    /* 20 */ 'Man! I Feel Like A Woman',
    /* 19 */ 'That\'s The Way It Is',
    /* 18 */ 'Jennifer Del Estero',
    /* 17 */ 'No Quiero Verte',
    /* 16 */ 'Heartbreaker',
    /* 15 */ 'Mi Chico Latino',
    /* 14 */ 'When You\'re Gone',
    /* 13 */ 'Si Me Advertí',
    /* 12 */ 'New',
    /* 11 */ 'The Kids Aren\'t Alright',
    /* 10 */ 'La Lola',
    /* 09 */ 'If Ya Gettin\' Down',
    /* 08 */ 'Angels',
    /* 07 */ 'Higher',
    /* 06 */ 'I Need To Know',
    /* 05 */ 'All I Have To Give',
    /* 04 */ 'All Star',
    /* 03 */ 'Someday We\'ll Know',
    /* 02 */ 'Someday',
    /* 01 */ 'Puente',
  ),

  // WEEK 4
  new Chart(
    /* 20 */ 'As Fast As You Can',
    /* 19 */ 'Don\'t Say You Love Me',
    /* 18 */ 'Man! I Feel Like A Woman',
    /* 17 */ 'When You\'re Gone',
    /* 16 */ 'La Lola',
    /* 15 */ 'That\'s The Way It Is',
    /* 14 */ 'The Kids Aren\'t Alright',
    /* 13 */ 'No Quiero Verte',
    /* 12 */ 'Mi Chico Latino',
    /* 11 */ 'If Ya Gettin\' Down',
    /* 10 */ 'Si Me Advertí',
    /* 09 */ 'New',
    /* 08 */ 'Higher',
    /* 07 */ 'All I Have To Give',
    /* 06 */ 'Someday',
    /* 05 */ 'Angels',
    /* 04 */ 'Puente',
    /* 03 */ 'Someday We\'ll Know',
    /* 02 */ 'I Need To Know',
    /* 01 */ 'All Star',
  ),

  // WEEK 5
  new Chart(
    /* 20 */ 'As Fast As You Can',
    /* 19 */ 'When You\'re Gone',
    /* 18 */ 'The Kids Aren\'t Alright',
    /* 17 */ 'Dreams In Digital',
    /* 16 */ 'Don\'t Say You Love Me',
    /* 15 */ 'If Ya Gettin\' Down',
    /* 14 */ 'Man! I Feel Like A Woman',
    /* 13 */ 'That\'s The Way It Is',
    /* 12 */ 'Higher',
    /* 11 */ 'No Quiero Verte',
    /* 10 */ 'All I Have To Give',
    /* 09 */ 'Si Me Advertí',
    /* 08 */ 'Mi Chico Latino',
    /* 07 */ 'New',
    /* 06 */ 'Someday',
    /* 05 */ 'Puente',
    /* 04 */ 'Someday We\'ll Know',
    /* 03 */ 'Angels',
    /* 02 */ 'I Need To Know',
    /* 01 */ 'All Star',
  ),

  // WEEK 6
  new Chart(
    /* 20 */ 'When You\'re Gone',
    /* 19 */ 'If Ya Gettin\' Down',
    /* 18 */ 'As Fast As You Can',
    /* 17 */ 'Higher',
    /* 16 */ 'All Or Nothing',
    /* 15 */ 'Dreams In Digital',
    /* 14 */ 'All I Have To Give',
    /* 13 */ 'Don\'t Say You Love Me',
    /* 12 */ 'Man! I Feel Like A Woman',
    /* 11 */ 'No Quiero Verte',
    /* 10 */ 'Puente',
    /* 09 */ 'Si Me Advertí',
    /* 08 */ 'That\'s The Way It Is',
    /* 07 */ 'Someday',
    /* 06 */ 'New',
    /* 05 */ 'Someday We\'ll Know',
    /* 04 */ 'Mi Chico Latino',
    /* 03 */ 'I Need To Know',
    /* 02 */ 'Angels',
    /* 01 */ 'All Star',
  ),

  // WEEK 7
  new Chart(
    /* 20 */ 'Dreams In Digital',
    /* 19 */ 'Don\'t Say You Love Me',
    /* 18 */ 'All I Have To Give',
    /* 17 */ 'As Fast As You Can',
    /* 16 */ 'Super Trouper',
    /* 15 */ 'No Quiero Verte',
    /* 14 */ 'All Or Nothing',
    /* 13 */ 'Puente',
    /* 12 */ 'Man! I Feel Like A Woman',
    /* 11 */ 'Fly Away',
    /* 10 */ 'Someday',
    /* 09 */ 'Si Me Advertí',
    /* 08 */ 'Maria Maria',
    /* 07 */ 'Someday We\'ll Know',
    /* 06 */ 'New',
    /* 05 */ 'That\'s The Way It Is',
    /* 04 */ 'I Need To Know',
    /* 03 */ 'Mi Chico Latino',
    /* 02 */ 'Angels',
    /* 01 */ 'All Star',
  ),

  // WEEK 8
  new Chart(
    /* 20 */ 'Dreams In Digital',
    /* 19 */ 'Díselo Con Flores',
    /* 18 */ 'Man! I Feel Like A Woman',
    /* 17 */ 'As Fast As You Can',
    /* 16 */ 'Puente',
    /* 15 */ 'T.V. And Coffee',
    /* 14 */ 'Super Trouper',
    /* 13 */ 'Someday',
    /* 12 */ 'Tengo Frío',
    /* 11 */ 'Si Me Advertí',
    /* 10 */ 'All Or Nothing',
    /* 09 */ 'Someday We\'ll Know',
    /* 08 */ 'Maria Maria',
    /* 07 */ 'Fly Away',
    /* 06 */ 'New',
    /* 05 */ 'That\'s The Way It Is',
    /* 04 */ 'I Need To Know',
    /* 03 */ 'Angels',
    /* 02 */ 'Mi Chico Latino',
    /* 01 */ 'All Star',
  ),

  // WEEK 9
  new Chart(
    /* 20 */ 'Unpretty',
    /* 19 */ 'Keep On Movin\'',
    /* 18 */ 'Díselo Con Flores',
    /* 17 */ 'Si Me Advertí',
    /* 16 */ 'Crazy',
    /* 15 */ 'Someday',
    /* 14 */ 'Someday We\'ll Know',
    /* 13 */ 'I Don\'t Want To Miss A Thing',
    /* 12 */ 'Super Trouper',
    /* 11 */ 'T.V. And Coffee',
    /* 10 */ 'Tengo Frío',
    /* 09 */ 'New',
    /* 08 */ 'All Or Nothing',
    /* 07 */ 'Angels',
    /* 06 */ 'That\'s The Way It Is',
    /* 05 */ 'Maria Maria',
    /* 04 */ 'I Need To Know',
    /* 03 */ 'All Star',
    /* 02 */ 'Fly Away',
    /* 01 */ 'Mi Chico Latino',
  ),

  // WEEK 10
  new Chart(
    /* 20 */ 'Pretty Fly',
    /* 19 */ 'Absolutely Everybody',
    /* 18 */ 'Keep On Movin\'',
    /* 17 */ 'Unpretty',
    /* 16 */ 'I\'m Sitting Down Here',
    /* 15 */ 'Díselo Con Flores',
    /* 14 */ 'New',
    /* 13 */ 'I Don\'t Want To Miss A Thing',
    /* 12 */ 'Super Trouper',
    /* 11 */ 'Crazy',
    /* 10 */ 'Angels',
    /* 09 */ 'That\'s The Way It Is',
    /* 08 */ 'T.V. And Coffee',
    /* 07 */ 'Tengo Frío',
    /* 06 */ 'I Need To Know',
    /* 05 */ 'Maria Maria',
    /* 04 */ 'All Or Nothing',
    /* 03 */ 'All Star',
    /* 02 */ 'Fly Away',
    /* 01 */ 'Mi Chico Latino',
  ),
);

testCharts.forEach(chart => chart.reverse());


console.log('Testing starting.');

const expect = chai.expect;

function generateList(outcoming, incoming) {
  const listA = new Chart();
  const listB = new Chart();
  const itemsA = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'];
  const itemsB = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'];

  for (let i = 1; i <= 20; i++) {
      listA.push(outcoming.includes(i) ? `TUBED ${i}` : itemsA.shift());
      listB.push(incoming.includes(i) ? `DEBUT ${i}` : itemsB.shift());
  }

  return [listA, listB];
}

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// createChart()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// TO DO!!!!!!!
{
  const charted = new Map()
  .set('Entry 1', 'Song A')
  .set('Entry 2', 'Song B');

  const uncharted = new List('Song C');

  const list = ['Entry 1', 'Entry 3'];

//   const { chart } = createChart(list, charted, uncharted);

//   expect(chart.length).to.equal(2);
//   expect(chart[0]).to.equal('Song C');
//   expect(chart[1]).to.equal('Song A');
//   expect(charted.size).to.equal(3);
//   expect(uncharted.length).to.equal(0);
}


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// generatePlaylist()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
//   const chart = new List(
//     '20',
//     '19',
//     '18',
//     'xtra', // VIDEO EXTRA
//     '17',
//     '16',
//     '15',
//     '14',
//     '13',
//     '12',
//     '11',
//     '10',
//     '09',
//     '08',
//     'xtra', // VIDEO EXTRA
//     '07',
//     '06',
//     '05',
//     '04',
//     '03',
//     '02',
//     '01',
//   );
     
//   const playlist = generatePlaylist(chart, 'INTRO', 'STING', 'ADVERTISEMENT', 'STING NEW VIDEO');
//   validate(playlist);
}


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// encode()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// encode a string
{
  const value = encode('Hello world!');
  const expectation = 'Ifmmp!xpsme\"';
  expect(expectation).to.equal(value);
}


// {
//   const [chartA, chartB] = generateList([1], [20]);

//   const database = new Map()
//   .set('TUBED 1', {history: [19, 17, 15, 11, 8, 6, 2, 2, 1]});
  
//   chartA.foo(chartB, database);
  
//   expect(chartB.length).to.equal(20);
  
//   expect(chartB.at(20)).to.equal('TUBED 1');
// }  


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// format()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// {
//   const [chart, nextChart] = generateList([18, 16], [19, 10]);
  
//   const database = new Map()
//   .set('TUBED 18', {history: [5, 5, 9, 13, 15]})
//   .set('TUBED 16', {history: [1, 1, 1, 2, 3, 3, 5, 6, 6, 8, 12]});
 
//   chart.format(nextChart, database);
  
//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(18)).to.equal('DEBUT 10');
//   expect(chart.at(16)).to.equal('TUBED 16');
  
//   expect(chart).not.to.include('TUBED 18'); 
//   expect(chart).not.to.include('DEBUT 19');
// }
// {
//   const [chart, nextChart] = generateList([20, 18, 17, 16], [20, 19, 15, 12]);
  
//   const database = new Map()
//   .set('TUBED 20', {history: [19]})
//   .set('TUBED 18', {history: [15]})
//   .set('TUBED 17', {history: [10]})
//   .set('TUBED 16', {history: [11]});
  
//   chart.format(nextChart, database);
  
//   expect(chart.length).to.equal(20);
 
//   expect([chart.at(20), chart.at(18)]).to.include('DEBUT 12');
  
//   expect(chart.at(17)).to.equal('TUBED 17');
//   expect(chart.at(16)).to.equal('TUBED 16');
  
//   expect(chart).not.to.include('DEBUT 20');
//   expect(chart).not.to.include('DEBUT 19');
//   expect(chart).not.to.include('DEBUT 15');
// }
// {
//   const [chart, nextChart] = generateList([18, 16], [20, 19]);
  
//   const database = new Map()
//   .set('TUBED 18', {history: [12, 14]})
//   .set('TUBED 16', {history: [09, 12]});
 
//   chart.format(nextChart, database);
  
//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(18)).to.equal('TUBED 18');
//   expect(chart.at(16)).to.equal('TUBED 16');
  
//   expect(chart).not.to.include('DEBUT 20');
//   expect(chart).not.to.include('DEBUT 19');
// }
// {
//   const [chart, nextChart] = generateList([16], [17]);
  
//   const database = new Map()
//   .set('TUBED 16', {history: [04, 06, 10]});
  
//   chart.format(nextChart, database);
  
//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(16)).to.equal('TUBED 16');
  
//   expect(chart).not.to.include('DEBUT 17');
// }
// {
//   const [chart, nextChart] = generateList([18], [16]);

//   const database = new Map()
//   .set('TUBED 18', {history: [08, 08, 11, 14]});
  
//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(18)).to.equal('TUBED 18');
  
//   expect(chart).not.to.include('DEBUT 16');
// }
// {
//   const [chart, nextChart] = generateList([20, 19, 17], [16, 11, 8]);

//   const database = new Map()
//   .set('TUBED 20', {history: [13, 13, 14, 17, 19]})
//   .set('TUBED 19', {history: [07, 07, 09, 11, 15]})
//   .set('TUBED 17', {history: [06, 05, 07, 08, 12]});
  
//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);
 
//   expect([chart.at(20), chart.at(19)]).to.include('DEBUT 11');
//   expect([chart.at(20), chart.at(19)]).to.include('DEBUT 8');
//   expect(chart.at(17)).to.equal('TUBED 17');
  
//   expect(chart).not.to.include('TUBED 20');
//   expect(chart).not.to.include('TUBED 19');
//   expect(chart).not.to.include('DEBUT 16');
// }
// {
//   const [chart, nextChart] = generateList([20], [1]);

//   const database = new Map()
//   .set('TUBED 20', {history: []});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(20)).to.equal('DEBUT 1');
  
//   expect(chart).not.to.include('TUBED 20');
// }
// // I WOULD LIKE THIS TO APPLY BUT IT'S NOT POSSIBLE BECAUSE 20, 19, 18, 18 * IS INTERPRETED AS AN ITEM STILL ASCENDING.
// // HOW TO DIFFERENTIATE THE ABOVE FROM 20, 18, 16, 14, 13, 13, 20, *?
// // {
// //   const { currentList, nextList } = generateList([18], [7]);

// //   const database = [
// //     {history: [20, 19, 18], match: 'OUT 18'},
// //   ];
  
// //   const list = format(currentList, nextList, database);
  
// //   expect(list.length).to.equal(20);
// //   expect(list.includes('OUT 18')).to.equal(false);
// //   expect(list.includes('IN 7')).to.equal(true);
// // }
// {
//   const [chart, nextChart] = generateList([20], [9]);

//   const database = new Map()
//   .set('TUBED 20', {history: []});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(20)).to.equal('DEBUT 9');
  
//   expect(chart).not.to.include('TUBED 20');  
// }
// {
//   const [chart, nextChart] = generateList([14, 13], [16, 12]);

//   const database = new Map()
//   .set('TUBED 14', {history: [6, 10, 14]})
//   .set('TUBED 13', {history: [7, 12, 13]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(14)).to.equal('DEBUT 12');
//   expect(chart.at(13)).to.equal('TUBED 13');
  
//   expect(chart).not.to.include('TUBED 14');
//   expect(chart).not.to.include('DEBUT 16');  
// }
// {
//   const [chart, nextChart] = generateList([13], [11]);
  
//   const database = new Map()
//   .set('TUBED 13', {history: [6, 10, 13]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(13)).to.equal('DEBUT 11');
  
//   expect(chart).not.to.include('TUBED 13');
// }
// // FORMATTING NOT ALLOWED IN SPITE OF THE EXISTENCE OF AN ILLEGAL ITEM
// {
//   const [chart, nextChart] = generateList([11], [5]);

//   const database = new Map()
//   .set('TUBED 11', {history: [6, 2, 2, 1]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(11)).to.equal('TUBED 11');
  
//   expect(chart).not.to.include('DEBUT 5');
// }
// // FORMATTING NOT ALLOWED IN SPITE OF THE EXISTENCE OF AN ILLEGAL ITEM
// {
//   const [chart, nextChart] = generateList([15], [10]);

//   const database = new Map()
//   .set('TUBED 15', {history: [19, 17, 13, 11, 11]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(15)).to.equal('TUBED 15');
  
//   expect(chart).not.to.include('DEBUT 10');
// }
// // FORMATTING NOT ALLOWED IN SPITE OF THE EXISTENCE OF AN ILLEGAL ITEM
// {
//   const [chart, nextChart] = generateList([20], [9]);

//   const database = new Map()
//   .set('TUBED 20', {history: [20, 18, 16, 14, 13, 13]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(20)).to.equal('TUBED 20');
  
//   expect(chart).not.to.include('DEBUT 9');
// }
// // FORMATTING NOT ALLOWED IN SPITE OF THE EXISTENCE OF AN ILLEGAL ITEM
// {
//   const [chart, nextChart] = generateList([13], [12]);

//   const database = new Map()
//   .set('TUBED 13', {history: [7, 12, 13]});

//   chart.format(nextChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(13)).to.equal('TUBED 13');
  
//   expect(chart).not.to.include('DEBUT 12');
// }


// // ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// // format2()
// // ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// {
//   const [previousChart, chart] = generateList([20, 18, 17, 16], [20, 19, 16, 13]);

//   const database = new Map()
//   .set('TUBED 20', {title: 'TUBED 20', history: [17, 15, 20, 20]})
//   .set('TUBED 18', {title: 'TUBED 18', history: [20, 18, 14, 12, 12, 18]})
//   .set('TUBED 17', {title: 'TUBED 17', history: [20, 20, 18, 17, 17]})
//   .set('TUBED 16', {title: 'TUBED 16', history: [1, 1, 1, 4, 5, 10, 13, 16]});

//   chart.format(previousChart,database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(20)).to.equal('DEBUT 20');
//   expect(chart.at(19)).to.equal('DEBUT 19');
//   expect(chart.at(13)).to.equal('TUBED 17');
  
//   expect(chart).not.to.include('TUBED 20');
//   expect(chart).not.to.include('TUBED 18');
//   expect(chart).not.to.include('TUBED 16');
//   expect(chart).not.to.include('DEBUT 13');
// }
// {
//   const [previousChart, chart] = generateList([20, 19, 18], [20, 19, 18]);

//   const database = new Map()
//   .set('TUBED 20', {title: 'TUBED 19', history: [20]})
//   .set('TUBED 19', {title: 'TUBED 19', history: [20, 19]})
//   .set('TUBED 18', {title: 'TUBED 18', history: [20, 19, 18]});

//   chart.format(previousChart, database);

//   expect(chart.length).to.equal(20);

//   expect(chart.at(20)).to.equal('TUBED 20');
//   expect(chart.at(19)).to.equal('TUBED 19');
//   expect(chart.at(18)).to.equal('TUBED 18');
  
//   expect(chart).not.to.include('DEBUT 20');
//   expect(chart).not.to.include('DEBUT 19');
//   expect(chart).not.to.include('DEBUT 18');
// }
// {  
//   const [previousChart, chart] = generateList([17, 16, 15], [20, 19, 18]);

//   const database = new Map()
//   .set('TUBED 17', {history: [20, 19, 18, 17]})
//   .set('TUBED 16', {history: [19, 18, 17, 16]})
//   .set('TUBED 15', {history: [18, 17, 16, 15]});

//   chart.format(previousChart, database);

//   expect(chart.length).to.equal(20);
  
//   expect(chart.at(20)).to.equal('DEBUT 20');
//   expect(chart.at(19)).to.equal('DEBUT 19');
//   expect(chart.at(18)).to.equal('DEBUT 18');

//   expect(chart).not.to.include('TUBED 17');
//   expect(chart).not.to.include('TUBED 16');
//   expect(chart).not.to.include('TUBED 15');
// }
// {
//   const charts = [
//     /* 20 */ ['TUBED A', 'TUBED A', 'DEBUT W'], /* 20 */
//     /* 19 */ ['TUBED B', 'DEBUT U', 'DEBUT X'], /* 19 */
//     /* 18 */ ['C',       'TUBED I', 'DEBUT U'], /* 18 */
//     /* 17 */ ['TUBED D', 'TUBED D', 'L'],       /* 17 */
//     /* 16 */ ['E',       'TUBED H', 'DEBUT Y'], /* 16 */
//     /* 15 */ ['TUBED F', 'DEBUT V', 'K'],       /* 15 */
//     /* 14 */ ['G',       'E',       'N'],       /* 14 */
//     /* 13 */ ['TUBED H', 'K',       'DEBUT Z'], /* 13 */
//     /* 12 */ ['TUBED I', 'C',       'E'],       /* 12 */
//     /* 11 */ ['J',       'L',       'DEBUT V'], /* 11 */
//     /* 10 */ ['K',       'G',       'C'],       /* 10 */
//     /* 09 */ ['L',       'N',       'O'],       /* 09 */
//     /* 08 */ ['M',       'M',       'G'],       /* 08 */
//     /* 07 */ ['N',       'J',       'S'],       /* 07 */
//     /* 06 */ ['O',       'O',       'P'],       /* 06 */
//     /* 05 */ ['P',       'P',       'Q'],       /* 05 */
//     /* 04 */ ['Q',       'Q',       'M'],       /* 04 */
//     /* 03 */ ['R',       'S',       'T'],       /* 03 */
//     /* 02 */ ['S',       'R',       'J'],       /* 02 */
//     /* 01 */ ['T',       'T',       'R'],       /* 01 */
//   ];
  
//   const chart = new Chart(...charts.map(item => item[2]).reverse());
//   const previousChart = new Chart(...charts.map(item => item[1]).reverse());
// //   const nextChart = new List(...charts.map(item => item[2]).reverse());
    
//   const database = new Map()
//   .set('TUBED B', {title: "TUBED B", history: [19, 16, 13, 19]})
//   .set('TUBED F', {title: "TUBED F", history: [19, 17, 13, 11, 11, 15]})
//   .set('TUBED A', {title: "TUBED A", history: [17, 15, 20, 20]})
//   .set('TUBED I', {title: "TUBED I", history: [20, 18, 14, 12, 12, 18]})
//   .set('TUBED D', {title: "TUBED D", history: [20, 20, 18, 17, 17]})
//   .set('TUBED H', {title: "TUBED H", history: [1, 1, 1, 4, 5, 10, 13, 16]});
  
//   const TUBED_D = database.get('TUBED D');
    
//   chart.format2(previousChart, database);
  
//   expect(chart.length).to.equal(20);
  
//   expect(database.has('DEBUT Y') || database.has('DEBUT Z')).to.equal(true);

//   expect(database.has('TUBED D')).to.equal(false);
  
//   expect(database.get('DEBUT Y') || database.get('DEBUT Z')).to.equal(TUBED_D);
  
//   expect(['DEBUT Y', 'DEBUT Z']).to.include(TUBED_D.match);
  
  
  
 
//   chart = format(currentChart, nextChart, database);
  
//   expect(chart.length).to.equal(20);
//   expect(chart[19]).to.equal('DEBUT W');
//   expect(chart[18]).to.equal('DEBUT X');
//   expect(chart[17]).to.equal('DEBUT U');
//   expect(chart[16]).to.equal('L');
//   expect(chart[15]).to.equal('DEBUT Y');
//   expect(chart[14]).to.equal('K');
//   expect(chart[13]).to.equal('N');
//   expect(chart[12]).to.equal('DEBUT Z');
//   expect(chart[11]).to.equal('E');
//   expect(chart[10]).to.equal('DEBUT V');
//   expect(chart[09]).to.equal('C');
//   expect(chart[08]).to.equal('O');
//   expect(chart[07]).to.equal('G');
//   expect(chart[06]).to.equal('S');
//   expect(chart[05]).to.equal('P');
//   expect(chart[04]).to.equal('Q');
//   expect(chart[03]).to.equal('M');
//   expect(chart[02]).to.equal('T');
//   expect(chart[01]).to.equal('J');
//   expect(chart[00]).to.equal('R');
//   }

// { // WEEK 3
//   { // POSITION 2
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());
//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(1);
//     expect(entries).to.include('Someday');

//     const value = Chart.corrector3(entries[0], chartA, chartB, database);

//     expect(value.length).to.equal(3);
//     expect(value).to.include('Puente');          // [02, 02, 01, 06] [01, 01, 02, 04]
//     expect(value).to.include('All Star');        // [02, 02, 04, 06] [14, 09, 02, 01]
//     expect(value).to.include('I Need To Know');  // [02, 02, 06, 06] [**, 10, 02, 02]
//   }
//   { // POSITION 3
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());

//     chart2.move('All I Have To Give', 2);
//     chartA.move('All I Have To Give', 2);

//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(2);
//     expect(entries).to.include('Someday');
//     expect(entries).to.include('All I Have To Give');

//     // Someday
//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(4);                // Someday
//       expect(value).to.include('Puente');              // [02, 02, 01, 06] [01, 01, 02, 04]
//       expect(value).to.include('All I Have To Give');  // [02, 02, 03, 06] [03, 03, 02, 07]
//       expect(value).to.include('All Star');            // [02, 02, 05, 06] [14, 09, 02, 01]
//       expect(value).to.include('I Need To Know');      // [02, 02, 06, 06] [**, 10, 02, 02]
//     }

//     // All I Have To Give
//     {
//       const value = Chart.corrector3(entries[1], chartA, chartB, database);

//       expect(value.length).to.equal(4);                // All I Have To Give
//       expect(value).to.include('Someday');             // [03, 03, 02, 07] [02, 02, 03, 06]
//       expect(value).to.include('Someday We\'ll Know'); // [03, 03, 04, 07] [05, 04, 03, 03]
//       expect(value).to.include('All Star');            // [03, 03, 05, 07] [14, 09, 03, 01]
//       expect(value).to.include('I Need To Know');      // [03, 03, 06, 07] [**, 10, 03, 02]
//     }
//   }
//   { // POSITION 5
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());

//     chart2.move('Someday We\'ll Know', 4);
//     chartA.move('Someday We\'ll Know', 4);

//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(2);
//     expect(entries).to.include('Someday');
//     expect(entries).to.include('Someday We\'ll Know');

//     // Someday
//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(4);                // Someday
//       expect(value).to.include('Puente');              // [02, 02, 01, 06] [01, 01, 02, 04]
//       expect(value).to.include('All Star');            // [02, 02, 03, 06] [14, 09, 02, 01]
//       expect(value).to.include('All I Have To Give');  // [02, 02, 04, 06] [03, 03, 02, 07]
//       expect(value).to.include('I Need To Know');      // [02, 02, 06, 06] [**, 10, 02, 02]
//     }

//     // Someday We'll Know
//     {
//       const value = Chart.corrector3(entries[1], chartA, chartB, database);

//       expect(value.length).to.equal(2);                // Someday We'll Know
//       expect(value).to.include('All Star');            // [05, 05, 03, 03] [14, 09, 05, 01]
//       expect(value).to.include('All I Have To Give');  // [05, 05, 04, 03] [03, 03, 05, 07]
//     }
//   }
//   { // POSITION 7
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());

//     chartA.move('If Ya Gettin\' Down', 6);

//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(2);
//     expect(entries).to.include('Someday');
//     expect(entries).to.include('If Ya Gettin\' Down');

//     // Someday
//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(3);            // Someday
//       expect(value).to.include('Puente');          // [02, 02, 01, 06] [01, 01, 02, 04]
//       expect(value).to.include('All Star');        // [02, 02, 04, 06] [14, 09, 02, 01]
//       expect(value).to.include('I Need To Know');  // [02, 02, 06, 06] [**, 10, 02, 02]
//     }

//     // If Ya Gettin' Down
//     {
//       const value = Chart.corrector3(entries[1], chartA, chartB, database);

//       expect(value.length).to.equal(5);                      // All I Have To Give
//       expect(value).to.include('I Need To Know');            // [07, 07, 06, 11] [**, 10, 07, 02]
//       expect(value).to.include('Higher');                    // [07, 07, 08, 11] [06, 05, 07, 08]
//       expect(value).to.include('Angels');                    // [07, 07, 09, 11] [20, 11, 08, 05]
//       expect(value).to.include('La Lola');                   // [07, 07, 10, 11] [04, 06, 09, 16]
//       expect(value).to.include('The Kids Aren\'t Alright');  // [07, 07, 11, 11] [08, 08, 10, 14]
//     }
//   }
//   { // POSITION 8
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());

//     chartA.move('The Kids Aren\'t Alright', 7);

//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(2);
//     expect(entries).to.include('Someday');
//     expect(entries).to.include('The Kids Aren\'t Alright');

//     // Someday
//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(3);            // Someday
//       expect(value).to.include('Puente');          // [02, 02, 01, 06] [01, 01, 02, 04]
//       expect(value).to.include('All Star');        // [02, 02, 04, 06] [14, 09, 02, 01]
//       expect(value).to.include('I Need To Know');  // [02, 02, 06, 06] [**, 10, 02, 02]
//     }

//     // The Kids Aren't Alright
//     {
//       const value = Chart.corrector3(entries[1], chartA, chartB, database);

//       expect(value.length).to.equal(4);                      // The Kids Aren't Alright
//       expect(value).to.include('Higher');                    // [08, 08, 07, 14] [06, 05, 08, 08]
//       expect(value).to.include('Angels');                    // [08, 08, 09, 14] [20, 11, 08, 05]
//       expect(value).to.include('If Ya Gettin\' Down');       // [08, 08, 10, 14] [07, 07, 08, 11]
//       expect(value).to.include('La Lola');                   // [08, 08, 11, 14] [04, 06, 08, 16]
//     }
//   }
//   { // POSITION 13
//     const [chart1, chart2, chartA, chartB] = charts.map(chart => chart.slice());

//     chartA.move('When You\'re Gone', 12);

//     const database = createDatabase(chart1, chart2);
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(2);
//     expect(entries).to.include('Someday');
//     expect(entries).to.include('When You\'re Gone');

//     // Someday
//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(3);            // Someday
//       expect(value).to.include('Puente');          // [02, 02, 01, 06] [01, 01, 02, 04]
//       expect(value).to.include('All Star');        // [02, 02, 04, 06] [14, 09, 02, 01]
//       expect(value).to.include('I Need To Know');  // [02, 02, 06, 06] [**, 10, 02, 02]
//     }

//     // When You\'re Gone
//     {
//       const value = Chart.corrector3(entries[1], chartA, chartB, database);

//       expect(value.length).to.equal(5);             // When You\'re Gone
//       expect(value).to.include('New');              // [13, 13, 12, 17] [**, **, 13, 09]
//       expect(value).to.include('Si Me Advertí');    // [13, 13, 14, 17] [17, 15, 13, 10]
//       expect(value).to.include('Mi Chico Latino');  // [13, 13, 15, 17] [**, **, 13, 12]
//       expect(value).to.include('Heartbreaker');     // [13, 13, 16, 17] [09, 12, 13, **]
//       expect(value).to.include('No Quiero Verte');  // [13, 13, 17, 17] [**, 19, 13, 13]
//     }
//   }
// }
// // WEEK 4
// {
//   const values = foo(4, charts);

//   { // POSITION 03
//     const { entries, chartA, chartB, database } = values[2];

//     expect(entries.length).to.equal(1);
//     expect(entries).to.include('Someday We\'ll Know');

//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(2);            // Someday We'll Know
//       expect(value).to.include('I Need To Know');  // [03, 03, 02, 04] [10, 06, 03, 02]
//       expect(value).to.include('Puente');          // [03, 03, 04, 04] [01, 01, 03, 05]
//     }
//   }
// }
// // WEEK 5
// {
//   {
//     const [chart1, chart2, chartA, chartB] = charts.slice(2, 6);
//     const database = createDatabase(...charts.slice(0, 4));
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(0);
//   }
// }
// // WEEK 6
// {
//   {
//     const [chart1, chart2, chartA, chartB] = charts.slice(3, 7);
//     const database = createDatabase(...charts.slice(0, 5));
//     const entries = Chart.detector3(chartA, chartB, database);

//     expect(entries.length).to.equal(0);
//   }
// }
// // WEEK 7
// {
//   const values = foo(7, charts);

//   { // POSITION 09
//     const { entries, chartA, chartB, database } = values[8];

//     expect(entries.length).to.equal(1);
//     expect(entries).to.include('Si Me Advertí');

//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(2);         // Si Me Advertí
//       expect(value).to.include('Maria Maria');  // [09, 09, 08, 11] [**, **, 09, 08]
//       expect(value).to.include('Someday');      // [09, 09, 10, 11] [06, 07, 09, 13]
//     }
//   }
// }
// // WEEK 8
// {
//   const values = foo(8, charts);

//   { // POSITION 06
//     const { entries, chartA, chartB, database } = values[5];

//     expect(entries.length).to.equal(1);
//     expect(entries).to.include('New');

//     {
//       const value = Chart.corrector3(entries[0], chartA, chartB, database);

//       expect(value.length).to.equal(3);
//       expect(value).to.include('That\'s The Way It Is');  // [06, 06, 05, 09] [08, 05, 06, 06]
//       expect(value).to.include('Fly Away');               // [06, 06, 07, 09] [**, 11, 06, 02]
//       expect(value).to.include('Maria Maria');            // [06, 06, 08, 09] [**, 08, 06, 05]
//     }
//   }
// }

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// parse()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const HTML = `
    <table>
      <tr>
        <th></th>
        <th></th>
        <th></th>
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>Title 1</td>
        <td>Artist 1</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>Title 2</td>
        <td>Artist 2</td>
      </tr>
    </table>
  `;
  
  const table = (new DOMParser()).parseFromString(HTML, 'text/html');
  const value = parse(table);

  expect(value.length).to.equal(2);
  expect(value[0]).to.equal(encode('Artist 1 Title 1'));
  expect(value[1]).to.equal(encode('Artist 2 Title 2'));
}


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// class ChartHistory
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const value = new ChartHistory(1, 2, 3, 4, 5).isValid();
  expect(value).to.equal(true);
}
{
  const value = new ChartHistory(5, 4, 3, 2, 1).isValid();
  expect(value).to.equal(true);
}
{
  const value = new ChartHistory(1, 2, 3, 2, 1).isValid();
  expect(value).to.equal(false);
}
{
  const value = new ChartHistory(1, 1, 1, 2, 3).isValid();
  expect(value).to.equal(true);
}
{
  const value = new ChartHistory(3, 2, 1, 2, 2).isValid();
  expect(value).to.equal(true);
}
{
  const value = new ChartHistory(1, 1, 1, 1, 1).isValid();
  expect(value).to.equal(true);
}


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// class List
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// difference()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Return a non zero-length list if there are differences between two arrays.
{
  const listA = new List('A', 'B', 'C', 'D', 'E');
  const listB = new List('F', 'G', 'H', 'A', 'B');
  const value = listA.difference(listB);
  
  expect(value.length).to.equal(3);
  expect(value[0]).to.equal('F');
  expect(value[1]).to.equal('G');
  expect(value[2]).to.equal('H');
}
// Return a non zero-length list if there are differences between two arrays. 
{
  const listA = new List('A', 'B', 'C', 'D', 'E');
  const listB = new List('F', 'G', 'H', 'A', 'B');
  const value = listB.difference(listA);
  
  expect(value.length).to.equal(3);
  expect(value[0]).to.equal('C');
  expect(value[1]).to.equal('D');
  expect(value[2]).to.equal('E');
}
// Return an empty list if there are no differences between two arrays.
{
  const listA = new List('A', 'B', 'C', 'D', 'E');
  const listB = new List('A', 'B', 'C', 'D', 'E');
  const value = listA.difference(listB);
  
  expect(value.length).to.equal(0);
}

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// insert()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const list = new List('A', 'B', 'C', 'D', 'E');
  list.insert([0, 1, 2, 3, 4], 'Z');
  
  expect(list.length).to.equal(10);
  
  expect(list[0]).to.equal('Z');
  expect(list[1]).to.equal('A');
  expect(list[2]).to.equal('Z');
  expect(list[3]).to.equal('B');
  expect(list[4]).to.equal('Z');
  expect(list[5]).to.equal('C');
  expect(list[6]).to.equal('Z');
  expect(list[7]).to.equal('D');
  expect(list[8]).to.equal('Z');
  expect(list[9]).to.equal('E');
}

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// intersection()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Return a non zero-length list if there are similarities between two arrays. 
{
  const listA = new List('A', 'B', 'C', 'D', 'E');
  const listB = new List('F', 'G', 'H', 'A', 'B');
  const value = listA.intersection(listB);
  
  expect(value.length).to.equal(2);
  expect(value[0]).to.equal('A');
  expect(value[1]).to.equal('B');
}
// Return a zero-length list if there are no similarities between two arrays. 
{
  const listA = new List('A', 'B', 'C', 'D', 'E');
  const listB = new List('F', 'G', 'H', 'I', 'J');
  const value = listA.intersection(listB);
  
  expect(value.length).to.equal(0);
}

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// random()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const list = new List('A', 'B', 'C', 'D', 'E');
  const value = list.random();

  expect(value).not.to.equal(undefined);
}

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// remove()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const list = new List('A', 'B', 'C', 'D', 'E');
  list.remove('A');
  
  expect(list.length).to.equal(4);
  
  expect(list[0]).to.equal('B');
  expect(list[1]).to.equal('C');
  expect(list[2]).to.equal('D');
  expect(list[3]).to.equal('E');
}
{
  const list = new List('A', 'A', 'A', 'A', 'A');
  list.remove('A');
  
  expect(list.length).to.equal(0);
}
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// replace()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const list = new List('A', 'B', 'C', 'D', 'E');
  const replacee = 'C';
  const replacement = 'F';

  list.replace(replacee, replacement);
  
  expect(list.length).to.equal(5);
  
  expect(list[0]).to.equal('A');
  expect(list[1]).to.equal('B');
  expect(list[2]).to.equal('F');
  expect(list[3]).to.equal('D');
  expect(list[4]).to.equal('E');
}
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// share()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
{
  const map = new Map();

  map.set(1, new List('A'));
  map.set(2, new List('A'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal(null);
}
{
  const map = new Map();

  map.set(1, new List('A', 'B'));
  map.set(2, new List('A'));

  map.share();

  expect(map.get(1)).to.equal('B');
  expect(map.get(2)).to.equal('A');
}
{
  const map = new Map();

  map.set(1, new List('A'));
  map.set(2, new List('A', 'B'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal('B');
}
{
  const map = new Map();

  map.set(1, new List('B', 'A'));
  map.set(2, new List('A'));

  map.share();

  expect(map.get(1)).to.equal('B');
  expect(map.get(2)).to.equal('A');
}
{
  const map = new Map();

  map.set(1, new List('A'));
  map.set(2, new List('B', 'A'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal('B');
}
{
  const map = new Map();

  map.set(1, new List('A', 'B'));
  map.set(2, new List('A', 'B'));
  map.set(3, new List('A', 'B'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal('B');
  expect(map.get(3)).to.equal(null);
}
{
  const map = new Map();

  map.set(1, new List('A', 'B', 'C'));
  map.set(2, new List('A', 'B', 'C'));
  map.set(3, new List('A', 'B', 'C'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal('B');
  expect(map.get(3)).to.equal('C');
}
{
  const map = new Map();

  map.set(1, new List('D', 'C', 'B', 'A'));
  map.set(2, new List('D', 'C', 'B'));
  map.set(3, new List('D', 'C'));
  map.set(4, new List('D'));

  map.share();

  expect(map.get(1)).to.equal('A');
  expect(map.get(2)).to.equal('B');
  expect(map.get(3)).to.equal('C');
  expect(map.get(4)).to.equal('D');
}
{
  const map = new Map();

  map.set(1, new List('D', 'C', 'B'));
  map.set(2, new List('D', 'C', 'B', 'A'));
  map.set(3, new List('D', 'C'));
  map.set(4, new List('D'));

  map.share();

  expect(map.get(1)).to.equal('B');
  expect(map.get(2)).to.equal('A');
  expect(map.get(3)).to.equal('C');
  expect(map.get(4)).to.equal('D');
}


// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// class NumberList
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// isIncreasing()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//
{
  const list = new NumberList(1, 2, 3, 4, 5, 6, 7, 8, 9);
  expect(list.isIncreasing()).to.equal(true);
  expect(list.isDecreasing()).to.equal(false);
  expect(list.isFlat()).to.equal(false);
}
{
  const list = new NumberList(9, 8, 7, 6, 5, 4, 3, 2, 1);
  expect(list.isIncreasing()).to.equal(false);
  expect(list.isDecreasing()).to.equal(true);
  expect(list.isFlat()).to.equal(false);
}
{
  const list = new NumberList(9);
  expect(list.length).to.equal(1);
  expect(list.isIncreasing()).to.equal(false);
  expect(list.isDecreasing()).to.equal(false);
  expect(list.isFlat()).to.equal(true);
}
{
  const list = new NumberList(1, 1, 1);
  expect(list.length).to.equal(3);
  expect(list.isIncreasing()).to.equal(false);
  expect(list.isDecreasing()).to.equal(false);
  expect(list.isFlat()).to.equal(true);
}
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// getProgressions()
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//
{
  const list = new NumberList(15, 12, 8, 4, 4, 3, 1, 1);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(8);
}
{
  const list = new NumberList(2, 2, 2, 2);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(4);
}
{
  const list = new NumberList(14, 9, 4, 1, 1, 1, 1, 1, 3, 3);
  const sublists = list.getProgressions();
  
  expect(sublists.length).to.equal(2);
  
  expect(sublists[0].length).to.equal(8);
  expect(sublists[0].at(0)).to.equal(14);
  expect(sublists[0].at(-1)).to.equal(1);
  
  expect(sublists[1].length).to.equal(2);
  expect(sublists[1].at(0)).to.equal(3);
  expect(sublists[1].at(-1)).to.equal(3);
}
{
  const list = new NumberList(10, 6, 2, 2, 3, 5, 5, 4, 6);
  const sublists = list.getProgressions();
  
  expect(sublists.length).to.equal(3);
  
  expect(sublists[0].length).to.equal(4);
  expect(sublists[0].at(0)).to.equal(10);
  expect(sublists[0].at(-1)).to.equal(2);

  expect(sublists[1].length).to.equal(3);
  expect(sublists[1].at(0)).to.equal(3);
  expect(sublists[1].at(-1)).to.equal(5);

  expect(sublists[2].length).to.equal(2);
  expect(sublists[2].at(0)).to.equal(4);
  expect(sublists[2].at(-1)).to.equal(6);
}
{
  const list = new NumberList(9, 8, 5, 5);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(4);
}
{
  const list = new NumberList(19, 15, 13, 8, 6, 6, 6, 9);
  const sublists = list.getProgressions();

  expect(sublists.length).to.equal(2);

  expect(sublists[0].length).to.equal(7);
  expect(sublists[0].at(0)).to.equal(19);
  expect(sublists[0].at(-1)).to.equal(6);
  
  expect(sublists[1].length).to.equal(1);
  expect(sublists[1].at(0)).to.equal(9);
}
{
  const list = new NumberList(20, 11, 8, 5, 3, 2, 3, 4, 7, 10);
  const sublists = list.getProgressions();

  expect(sublists.length).to.equal(2);

  expect(sublists[0].length).to.equal(6);
  expect(sublists[0].at(0)).to.equal(20);
  expect(sublists[0].at(-1)).to.equal(2);
  
  expect(sublists[1].length).to.equal(4);
  expect(sublists[1].at(0)).to.equal(3);
  expect(sublists[1].at(-1)).to.equal(10);
}
{
  const list = new NumberList(16, 14, 10, 8, 4);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(5);
}
{
  const list = new NumberList(12, 9, 7, 6, 7, 7, 9, 14);
  const sublists = list.getProgressions();

  expect(sublists.length).to.equal(2);

  expect(sublists[0].length).to.equal(4);
  expect(sublists[0].at(0)).to.equal(12);
  expect(sublists[0].at(-1)).to.equal(6);
  
  expect(sublists[1].length).to.equal(4);
  expect(sublists[1].at(0)).to.equal(7);
  expect(sublists[1].at(-1)).to.equal(14);
}
{
  const list = new NumberList(12, 10, 7);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(3);
}
{
  const list = new NumberList(4, 6, 10, 16);
  const sublists = list.getProgressions();
  expect(sublists.length).to.equal(1);
  expect(sublists[0].length).to.equal(4);
}

console.log('Testing completed.');
